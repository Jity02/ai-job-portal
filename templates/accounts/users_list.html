{% extends "base.html" %}

{% block content %}

<style>
.user-card {
    background: white;
    padding: 15px;
    margin-bottom: 15px;
    border-radius: 8px;
    box-shadow: 0 2px 6px rgba(0,0,0,0.05);
}

.btn {
    padding: 6px 12px;
    border-radius: 4px;
    text-decoration: none;
    margin-right: 8px;
}

.btn-profile {
    background: #0d6efd;
    color: white;
}

.btn-chat {
    background: #198754;
    color: white;
}

.btn-edit {
    background: #ffc107;
    color: black;
}
</style>

<div style="max-width:700px; margin:40px auto;">

    <h2>All Users</h2>

    {% for user in users %}
        <div class="user-card">

            <strong>{{ user.username }}</strong>
            <br>
            <small>{{ user.email }}</small>

            <div style="margin-top:10px;">

                <!-- View Profile -->
                <a href="{% url 'profile' user.id %}" class="btn btn-profile">
                    View Profile
                </a>

                <!-- Chat Button -->
                {% if request.user.is_authenticated and request.user.id != user.id %}
                    <a href="{% url 'chat' user.id %}" class="btn btn-chat">
                        Chat
                    </a>
                {% endif %}

                <!-- Edit Button (only for self) -->
                {% if request.user.id == user.id %}
                    <a href="{% url 'edit_profile' %}" class="btn btn-edit">
                        Edit Profile
                    </a>
                {% endif %}

            </div>

        </div>
    {% endfor %}

</div>

{% endblock %}
